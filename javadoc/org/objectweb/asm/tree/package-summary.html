<!DOCTYPE HTML>
<html lang="no">
<head>
<!-- Generated by javadoc (21) on Wed Jul 26 09:16:35 CEST 2023 -->
<title>org.objectweb.asm.tree</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-07-26">
<meta name="description" content="declaration: package: org.objectweb.asm.tree">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html#package">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Package:</p>
<ul>
<li><a href="#package-description">Description</a></li>
<li><a href="#related-package-summary">Related Packages</a></li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li><a href="#related-package-summary">Related Packages</a>&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package org.objectweb.asm.tree" class="title">Package org.objectweb.asm.tree</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">org.objectweb.asm.tree</span></div>
<section class="package-description" id="package-description">
<div class="block"><p>
Provides an ASM visitor that constructs a tree representation of the
classes it visits. This class adapter can be useful to implement "complex"
class manipulation operations, i.e., operations that would be very hard to
implement without using a tree representation (such as optimizing the number
of local variables used by a method).
</p>

<p>
However, this class adapter has a cost: it makes ASM bigger and slower. Indeed
it requires more than twenty new classes, and multiplies the time needed to
transform a class by almost two (it is almost two times faster to read, "modify"
and write a class with a ClassVisitor than with a ClassNode). This is why
this package is bundled in an optional <code>asm-tree.jar</code> library that
is separated from (but requires) the <code>asm.jar</code> library, which contains
the core ASM framework. This is also why <em>it is recommended not to use this
class adapter when it is possible</em>.
</p>

<p>
The root class is the ClassNode, that can be created from existing bytecode. For example:
</p>

<pre>
  ClassReader classReader = new ClassReader(source);
  ClassNode classNode = new ClassNode();
  classReader.accept(classNode, 0);
</pre>

<p>
Now the content of ClassNode can be modified and then
serialized back into bytecode:
</p>

<pre>
  ClassWriter classWriter = new ClassWriter(0);
  classNode.accept(classWriter);
</pre>

<p>
Using a simple ClassVisitor it is possible to create MethodNode instances per-method.
In this example MethodNode is acting as a buffer that is flushed out at visitEnd() call:
</p>

<pre>
  ClassReader classReader = new ClassReader(source);
  ClassWriter classWriter = new ClassWriter(0);
  ClassVisitor classVisitor = new ClassVisitor(ASM7, classWriter) {
    public MethodVisitor visitMethod(int access, String name,
        String desc, String signature, String[] exceptions) {
      final MethodVisitor methodVisitor = 
          super.visitMethod(access, name, desc, signature, exceptions);
      MethodNode methodNode = new MethodNode(access, name, desc, signature, exceptions) {
        public void visitEnd() {
          // transform or analyze method code using tree API
          accept(methodVisitor);
        }
      };
    }
  };
  classReader.accept(classVisitor, 0);
</pre>

<p>
Several strategies can be used to construct method code from scratch. The first
option is to create a MethodNode, and then create XxxInsnNode instances and
add them to the instructions list:
</p>

<pre>
MethodNode methodNode = new MethodNode(...);
methodNode.instructions.add(new VarInsnNode(ALOAD, 0));
...
</pre>

<p>
Alternatively, you can use the fact that MethodNode is a MethodVisitor, and use
that to create the XxxInsnNode and add them to the instructions list through
the standard MethodVisitor methods:
</p>

<pre>
MethodNode methodNode = new MethodNode(...);
methodNode.visitVarInsn(ALOAD, 0);
...
</pre>

<p>
If you cannot generate all the instructions in sequential order, i.e. if you
need to save some pointer in the instruction list and then insert instructions
at that place after other instructions have been generated, you can use InsnList
methods insert() and insertBefore() to insert instructions at a saved pointer.
</p>

<pre>
MethodNode methodNode = new MethodNode(...);
methodNode.visitVarInsn(ALOAD, 0);
AbstractInsnNode ptr = methodNode.instructions.getLast();
methodNode.visitVarInsn(ALOAD, 1);
// inserts an instruction between ALOAD 0 and ALOAD 1
methodNode.instructions.insert(ptr, new VarInsnNode(ALOAD, 0));
...
</pre>

<p>
If you need to insert instructions while iterating over an existing instruction
list, you can also use several strategies. The first one is to use a
ListIterator over the instruction list:
</p>

<pre>
ListIterator it = methodNode.instructions.iterator();
while (it.hasNext()) {
    AbstractInsnNode insnNode = (AbstractInsnNode) it.next();
    if (...) {
        it.add(new VarInsnNode(ALOAD, 0));
    }
}
</pre>

<p>
It is also possible to convert an instruction list into an array and iterate through
array elements:
</p>

<pre>
AbstractInsnNode[] insns = methodNode.instructions.toArray();
for(int i = 0; i&lt;insns.length; i++) {
    AbstractInsnNode insn = insns[i];
    if (...) {
        methodNode.instructions.insert(insn, new VarInsnNode(ALOAD, 0));
    }
}
</pre>

<p>
If you want to insert these instructions through the MethodVisitor methods,
you can use another instance of MethodNode as a MethodVisitor and then
insert instructions collected by that instance into the instruction list.
For example:
</p>

<pre>
AbstractInsnNode[] insns = methodNode.instructions.toArray();
for(int i = 0; i&lt;insns.length; i++) {
    AbstractInsnNode insn = insns[i];
    if (...) {
        MethodNode toInsert = new MethodNode();
        toInsert.visitVarInsn(ALOAD, 0);
        toInsert.visitVarInsn(ALOAD, 1);
        m.instructions.insert(insn, toInsert.instructions);
    }
}
</pre>

<p></div>
<dl class="notes">
<dt>Since:</dt>
<dd>ASM 1.3.3</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="../package-summary.html">org.objectweb.asm</a></div>
<div class="col-last even-row-color">
<div class="block">Provides a small and fast bytecode manipulation framework.</div>
</div>
<div class="col-first odd-row-color"><a href="analysis/package-summary.html">org.objectweb.asm.tree.analysis</a></div>
<div class="col-last odd-row-color">
<div class="block">
Provides a framework for static code analysis based on the asm.tree package.</div>
</div>
<div class="col-first even-row-color"><a href="../commons/package-summary.html">org.objectweb.asm.commons</a></div>
<div class="col-last even-row-color">
<div class="block">Provides some useful class and method adapters.</div>
</div>
<div class="col-first odd-row-color"><a href="../signature/package-summary.html">org.objectweb.asm.signature</a></div>
<div class="col-last odd-row-color">
<div class="block">Provides support for type signatures.</div>
</div>
<div class="col-first even-row-color"><a href="../util/package-summary.html">org.objectweb.asm.util</a></div>
<div class="col-last even-row-color">
<div class="block">Provides ASM visitors that can be useful for programming and
debugging purposes.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exception Classes</button></div>
<div id="class-summary.tabpanel" role="tabpanel">
<div class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="AbstractInsnNode.html" title="class in org.objectweb.asm.tree">AbstractInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a bytecode instruction.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="AnnotationNode.html" title="class in org.objectweb.asm.tree">AnnotationNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an annotation.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="ClassNode.html" title="class in org.objectweb.asm.tree">ClassNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a class.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="FieldInsnNode.html" title="class in org.objectweb.asm.tree">FieldInsnNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a field instruction.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="FieldNode.html" title="class in org.objectweb.asm.tree">FieldNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a field.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="FrameNode.html" title="class in org.objectweb.asm.tree">FrameNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a stack map frame.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="IincInsnNode.html" title="class in org.objectweb.asm.tree">IincInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an IINC instruction.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="InnerClassNode.html" title="class in org.objectweb.asm.tree">InnerClassNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an inner class.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="InsnList.html" title="class in org.objectweb.asm.tree">InsnList</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A doubly linked list of <a href="AbstractInsnNode.html" title="class in org.objectweb.asm.tree"><code>AbstractInsnNode</code></a> objects.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="InsnNode.html" title="class in org.objectweb.asm.tree">InsnNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a zero operand instruction.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="IntInsnNode.html" title="class in org.objectweb.asm.tree">IntInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an instruction with a single int operand.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="InvokeDynamicInsnNode.html" title="class in org.objectweb.asm.tree">InvokeDynamicInsnNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an invokedynamic instruction.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="JumpInsnNode.html" title="class in org.objectweb.asm.tree">JumpInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a jump instruction.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="LabelNode.html" title="class in org.objectweb.asm.tree">LabelNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">An <a href="AbstractInsnNode.html" title="class in org.objectweb.asm.tree"><code>AbstractInsnNode</code></a> that encapsulates a <a href="../Label.html" title="class in org.objectweb.asm"><code>Label</code></a>.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="LdcInsnNode.html" title="class in org.objectweb.asm.tree">LdcInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an LDC instruction.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="LineNumberNode.html" title="class in org.objectweb.asm.tree">LineNumberNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a line number declaration.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="LocalVariableAnnotationNode.html" title="class in org.objectweb.asm.tree">LocalVariableAnnotationNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a type annotation on a local or resource variable.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="LocalVariableNode.html" title="class in org.objectweb.asm.tree">LocalVariableNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a local variable declaration.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="LookupSwitchInsnNode.html" title="class in org.objectweb.asm.tree">LookupSwitchInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a LOOKUPSWITCH instruction.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="MethodInsnNode.html" title="class in org.objectweb.asm.tree">MethodInsnNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a method instruction.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="MethodNode.html" title="class in org.objectweb.asm.tree">MethodNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a method.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="ModuleExportNode.html" title="class in org.objectweb.asm.tree">ModuleExportNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an exported package with its name and the module that can access to it.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="ModuleNode.html" title="class in org.objectweb.asm.tree">ModuleNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a module declaration.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="ModuleOpenNode.html" title="class in org.objectweb.asm.tree">ModuleOpenNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents an opened package with its name and the module that can access it.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="ModuleProvideNode.html" title="class in org.objectweb.asm.tree">ModuleProvideNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a service and its implementation provided by the current module.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="ModuleRequireNode.html" title="class in org.objectweb.asm.tree">ModuleRequireNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a required module with its name and access of a module descriptor.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="MultiANewArrayInsnNode.html" title="class in org.objectweb.asm.tree">MultiANewArrayInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a MULTIANEWARRAY instruction.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="ParameterNode.html" title="class in org.objectweb.asm.tree">ParameterNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a parameter of a method.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="RecordComponentNode.html" title="class in org.objectweb.asm.tree">RecordComponentNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a record component.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="TableSwitchInsnNode.html" title="class in org.objectweb.asm.tree">TableSwitchInsnNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a TABLESWITCH instruction.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="TryCatchBlockNode.html" title="class in org.objectweb.asm.tree">TryCatchBlockNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a try catch block.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="TypeAnnotationNode.html" title="class in org.objectweb.asm.tree">TypeAnnotationNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a type annotation.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="TypeInsnNode.html" title="class in org.objectweb.asm.tree">TypeInsnNode</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a type instruction.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab5"><a href="UnsupportedClassVersionException.html" title="class in org.objectweb.asm.tree">UnsupportedClassVersionException</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab5">
<div class="block">Exception thrown in <a href="AnnotationNode.html#check(int)"><code>AnnotationNode.check(int)</code></a>, <a href="ClassNode.html#check(int)"><code>ClassNode.check(int)</code></a>, <a href="FieldNode.html#check(int)"><code>FieldNode.check(int)</code></a> and <a href="MethodNode.html#check(int)"><code>MethodNode.check(int)</code></a> when these nodes (or their children, recursively)
 contain elements that were introduced in more recent versions of the ASM API than version passed
 to these methods.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="Util.html" title="class in org.objectweb.asm.tree">Util</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block">Utility methods to convert an array of primitive or object values to a mutable ArrayList, not
 baked by the array (unlike <a href="https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Arrays.html#asList(T...)" title="class or interface in java.util" class="external-link"><code>Arrays.asList(T...)</code></a>).</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="VarInsnNode.html" title="class in org.objectweb.asm.tree">VarInsnNode</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">A node that represents a local variable instruction.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
</div>
</div>
</body>
</html>
